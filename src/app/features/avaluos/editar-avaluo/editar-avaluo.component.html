<div class="avaluos-container">
  <app-sidebar></app-sidebar>

  <div class="main-content">
    <header class="page-header">
      <h1>Editar Avalúo</h1>
      <p-button
        label="Volver"
        icon="pi pi-arrow-left"
        styleClass="p-button-secondary"
        (onClick)="volver()"
      ></p-button>
    </header>

    <div class="content">
      <p-card header="Editar Avalúo" *ngIf="!loading">
        <form [formGroup]="avaluoForm" (ngSubmit)="onSubmit()">
          <p-tabView [(activeIndex)]="activeTab">
            <!-- Información General -->
            <p-tabPanel header="Información General">
              <app-informacion-general [form]="avaluoForm"></app-informacion-general>
            </p-tabPanel>

            <!-- Aspectos Jurídicos -->
            <p-tabPanel header="Aspectos Jurídicos">
              <app-aspectos-juridicos [form]="avaluoForm"></app-aspectos-juridicos>
            </p-tabPanel>

            <!-- Características Generales -->
            <p-tabPanel header="Características Generales">
              <app-caracteristicas-generales [form]="avaluoForm"></app-caracteristicas-generales>
            </p-tabPanel>

            <!-- Inspección Física -->
            <p-tabPanel header="Inspección Física">
              <app-inspeccion-fisica [form]="avaluoForm"></app-inspeccion-fisica>
            </p-tabPanel>
          </p-tabView>

          <div class="form-actions">
            <p-button
              label="Cancelar"
              icon="pi pi-times"
              styleClass="p-button-secondary p-mr-2"
              (onClick)="volver()"
            ></p-button>
            <p-button
              label="Actualizar Avalúo"
              icon="pi pi-check"
              styleClass="p-button-success"
              type="submit"
              [loading]="updating"
              [disabled]="avaluoForm.invalid"
            ></p-button>
          </div>
        </form>
      </p-card>

      <div *ngIf="loading" class="loading-container">
        <p>Cargando avalúo...</p>
      </div>
    </div>
  </div>
</div>